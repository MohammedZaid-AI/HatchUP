<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}HatchUp VC{% endblock %}</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Marked.js for Markdown Rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        window.HATCHUP_SUPABASE = {
            url: "{{ supabase_url | default('', true) | e }}",
            anonKey: "{{ supabase_anon_key | default('', true) | e }}"
        };
    </script>
    <link rel="stylesheet" href="/static/css/style.css?v=20260228c">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body class="mode-loading">
    <div id="mode-loader" class="mode-loader" role="status" aria-live="polite">
        <div class="mode-loader-spinner" aria-hidden="true"></div>
    </div>
    <div class="app-container" id="app-container" hidden>
        <aside class="sidebar">
            <div class="sidebar-top">
                <div class="sidebar-group primary-group">
                    <a href="/" class="logo" aria-label="HatchUp Home">
                        <img src="/static/img/hatchup-logo.png" alt="HatchUp" class="logo-img">
                        <span class="logo-text">HatchUp</span>
                    </a>

                    <nav class="sidebar-nav">
                        <a href="/chat" class="nav-link {% if request.url.path == '/chat' or request.url.path == '/hatchup_chat' %}active{% endif %}">
                            <i class="fas fa-comments"></i> HatchUp Chat
                        </a>
                    </nav>
                </div>

                <div class="sidebar-group mode-group">
                    <p class="mode-title">Mode</p>
                    <div class="mode-toggle" id="mode-toggle" data-active-mode="{{ mode or 'vc' }}">
                        <span class="mode-label-left">VC Mode</span>
                        <label class="switch" for="mode-switch-input">
                            <input id="mode-switch-input" type="checkbox" aria-label="Toggle VC and Founder mode">
                            <span class="switch-slider"></span>
                        </label>
                        <span class="mode-label-right">Founder Mode</span>
                    </div>
                </div>

                <div class="sidebar-divider"></div>

                <div class="sidebar-group tools-group">
                    <p class="mode-title" id="tools-section-label">VC Tools</p>
                    <nav class="sidebar-nav" id="vc-nav">
                        <a href="/vc/deck-analyzer" class="nav-link {% if request.url.path == '/vc/deck-analyzer' %}active{% endif %}">
                            <i class="fas fa-chart-line"></i> Pitch Deck Analyzer
                        </a>
                        <a href="/vc/deep-research" class="nav-link {% if request.url.path == '/vc/deep-research' %}active{% endif %}">
                            <i class="fas fa-search"></i> Deep Research
                        </a>
                        <a href="/vc/memo" class="nav-link {% if request.url.path == '/vc/memo' %}active{% endif %}">
                            <i class="fas fa-file-signature"></i> Manual Memo Creator
                        </a>
                    </nav>

                    <nav class="sidebar-nav" id="founder-nav">
                        <a href="#" id="founder-mode-link" class="nav-link {% if request.url.path == '/founder' %}active{% endif %}">
                            <i class="fas fa-rocket"></i> HatchUp Founders
                        </a>
                    </nav>
                </div>

                <div class="sidebar-divider"></div>

                <div class="sidebar-group past-analyses-group" id="past-analyses-panel">
                    <p class="mode-title">Past Analyses</p>
                    <div id="past-analyses-list" class="past-analyses-list"></div>
                </div>
            </div>

            <div class="sidebar-footer">
                <p>Powered by <strong>HatchUp.ai</strong></p>
            </div>
        </aside>

        <main class="main-content">
            <div class="workspace-topbar">
                <div class="workspace-auth-nav" data-auth="logged-in" style="display: none;">
                    <div class="profile-menu">
                        <button class="profile-menu-btn" data-profile-toggle="true" type="button" aria-label="Open profile menu" aria-expanded="false">
                            <span class="profile-avatar" data-profile-avatar="true">
                                U
                            </span>
                            <span class="profile-caret" aria-hidden="true"></span>
                        </button>
                        <div class="profile-dropdown" data-profile-dropdown="true" hidden>
                            <div class="profile-dropdown-head">
                                <p class="profile-name" data-profile-name="true"></p>
                                <p class="profile-email" data-profile-email="true"></p>
                            </div>
                            <button class="profile-dropdown-item" data-profile-edit="true" type="button">Edit Profile</button>
                            <button class="profile-dropdown-item danger" data-profile-logout="true" type="button">Logout</button>
                        </div>
                    </div>
                </div>
            </div>
            {% set is_chat_route = request.url.path == '/chat' or request.url.path == '/hatchup_chat' %}
            <section id="{{ 'core-feature-view' if is_chat_route else 'vc-mode-view' }}" class="mode-view {{ 'mode-view-core' if is_chat_route else 'mode-view-vc' }}">
                {% block content %}{% endblock %}
            </section>
            {% if not is_chat_route %}
            <section id="founder-mode-view" class="mode-view mode-view-founder" hidden>
                <div class="content-header">
                    <h1>HatchUp Founders</h1>
                    <p>Founder Mode is visible for roadmap signaling. All tools are currently marked as coming soon.</p>
                </div>

                <div class="grid-3 founder-grid">
                    <div class="card coming-soon-card">
                        <h3>Founder Copilot</h3>
                        <p>Context-aware startup guidance and planning assistant.</p>
                        <span class="coming-soon-badge">Coming Soon</span>
                    </div>
                    <div class="card coming-soon-card">
                        <h3>Fundraising Builder</h3>
                        <p>Guided workflows for building raise strategy and investor pipeline.</p>
                        <span class="coming-soon-badge">Coming Soon</span>
                    </div>
                    <div class="card coming-soon-card">
                        <h3>Deck Feedback Studio</h3>
                        <p>Structured review loops to improve storytelling and pitch quality.</p>
                        <span class="coming-soon-badge">Coming Soon</span>
                    </div>
                </div>
            </section>
            {% endif %}
        </main>
    </div>

    <script src="/static/js/supabaseClient.js?v=20260228a"></script>
    <script src="/static/js/session.js?v=20260228b"></script>
    <script src="/static/js/mode_state.js?v=20260224c"></script>
    <script src="/static/js/analysis_manager.js?v=20260224c"></script>
    <script src="/static/js/main.js?v=20260224c"></script>
    {% block scripts %}{% endblock %}

    <template id="profile-modal-template">
        <div id="profile-modal" class="auth-modal">
            <div class="auth-modal-card profile-modal-card">
                <button class="auth-close" data-profile-close="true" type="button" aria-label="Close dialog">X</button>
                <h2>Edit Profile</h2>
                <form id="profile-form">
                    <label for="profile-full-name">Display Name</label>
                    <input id="profile-full-name" type="text" maxlength="120" autocomplete="name" />
                    <label for="profile-avatar-file">Profile Picture</label>
                    <input id="profile-avatar-file" type="file" accept="image/*" />
                    <div class="profile-preview-row">
                        <span class="profile-avatar profile-avatar-lg" data-profile-modal-avatar="true">
                            U
                        </span>
                        <p class="profile-preview-text">Recommended: square image, up to 5MB.</p>
                    </div>
                    <button id="profile-save-btn" class="home-auth-btn auth-submit-btn" type="submit">Save Changes</button>
                </form>
                <p id="profile-error" class="auth-error"></p>
            </div>
        </div>
    </template>
</body>

</html>

